import{v as l,o as e,L as i,q as c,x as d,O as m}from"./chunk-QMGIS6GS-zfQIRXjO.js";function x({genres:r=[],counts:a}){const n=l(),{genreId:t}=n,o=t?decodeURIComponent(t):null;return e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-title",children:"Library"}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsx(i,{to:"/",className:o===null?"sidebar-link-active":"sidebar-link",children:"All Books"}),e.jsxs("div",{className:"sidebar-section",children:[e.jsx("div",{className:"sidebar-heading",children:"Genres"}),r.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Loading genres..."}):r.map(s=>e.jsxs(i,{to:`/genre/${encodeURIComponent(s.name)}`,className:o===s.name?"sidebar-link-active":"sidebar-link",children:[s.name,a&&e.jsxs("span",{className:"ml-2 text-xs text-gray-900",children:["(",s.count,")"]})]},s.name))]})]}),e.jsx("div",{className:"mt-auto pt-6 px-6",children:e.jsxs("div",{className:"text-xs text-gray-900",children:["Powered by",e.jsx("br",{}),e.jsx("a",{href:"https://cloudflare.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-800 hover:underline",children:"Cloudflare"})]})})]})}function h(){return e.jsx("div",{className:"mock-data-banner",children:e.jsxs("div",{className:"banner-content",children:[e.jsx("h2",{children:"Demo Mode: Using Mock Data"}),e.jsx("p",{children:"You're viewing this app with mock data. To connect to a real database:"}),e.jsxs("ol",{children:[e.jsx("li",{children:e.jsx("a",{href:"https://developers.cloudflare.com/hyperdrive/configuration/connect-to-postgres/",target:"_blank",rel:"noopener noreferrer",children:"Set up a PostgreSQL database"})}),e.jsx("li",{children:"Create a Hyperdrive binding in your wrangler.jsonc file."}),e.jsxs("li",{children:["See the"," ",e.jsx("a",{href:"https://github.com/cloudflare/templates/tree/main/react-router-postgres-ssr-template",target:"_blank",rel:"noopener noreferrer",children:"project README.md"})," ","for complete instructions."]})]})]})})}const p=c(function(){const{genres:a,dataSource:n}=d();return e.jsxs("div",{className:"layout",children:[e.jsx(x,{genres:a,counts:!0}),e.jsxs("main",{className:"main-content",children:[n==="mock"&&e.jsx(h,{}),e.jsx(m,{context:{genres:a}})]})]})});export{p as default};
